!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Onigiri=t():e.Onigiri=t()}(this,(function(){return(()=>{"use strict";var e={607:(e,t,n)=>{n.r(t),n.d(t,{Component:()=>l,Template:()=>s,html:()=>o});class d extends HTMLElement{constructor(){super(),this.hasAttribute("data-id")&&(this.dummyId=Number(this.dataset.id))}}customElements.define("dummy-elem",d);class l extends HTMLElement{constructor(){super(),this.state=this.init();const{temp:e,args:t}=this.render(this.state);this.template=e(),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(this.template.fragment),this._update(this.state)}dispatch(e,...t){this.state=this[e](this.state,t),this._update(this.state)}_update(e){const{args:t}=this.render(e);this.template.update(...t)}}class s{constructor(e){this.fullstring=e.join("");let t="";this.placeholder=[];for(let n=0;n<e.length;n++){const d=e[n];t+=d;const l=d.trim();if("="==l[l.length-1]||"="==l[l.length-2]){let e="";if("'"==l[l.length-1]||'"'==l[l.length-1]||"`"==l[l.length-1]){t+=l[l.length];for(let t=l.length-3;t>=0&&" "!=l[t];t--)e=l[t]+e}else{t+='""';for(let t=l.length-2;t>=0&&" "!=l[t];t--)e=l[t]+e}t+=" data-dummy-attr"+n+"="+e,this.placeholder.push({kind:"attr",element:null,attr:e})}else n!=e.length-1&&(t+='<dummy-elem data-id="'+n+'"></dummy-elem>',this.placeholder.push({kind:"text",node:null}))}let n=document.createElement("template");n.innerHTML=t;for(let t=0;t<e.length-1;t++){const e=this.placeholder[t];switch(e.kind){case"attr":const d=n.content.querySelector("[data-dummy-attr"+t+"]");e.element=d,d.removeAttribute("data-dummy-attr"+t);break;case"text":const l=n.content.querySelector('[data-id="'+t+'"]'),s=document.createTextNode("hhhhh");l.parentNode.replaceChild(s,l),e.node=s}}this.fragment=n.content}update(...e){const t=[];for(let d=0;d<e.length;d++)if("object"==typeof(n=e[d])&&"function"==typeof n.temp&&"string"==typeof n.fullstring){const n={kind:"temp",value:e[d]};t.push(n)}else t.push({kind:typeof e[d],value:e[d]});var n;for(let e=0;e<this.placeholder.length;e++){const n=this.placeholder[e],d=t[e];if("attr"==n.kind){const e=n.element.getAttributeNode(n.attr);switch(n.attr[0]){case"@":n.element["on"+e.name.slice(1)]=d.value;break;case".":n.element[e.name.slice(1)]=d.value;break;case"?":let t=e.name.slice(1);d.value?n.element.setAttribute(t,""):n.element.hasAttribute(t)&&n.element.removeAttribute(t);break;default:e.value=String(d.value)}}else if("temp"==d.kind&&"temp"==n.kind){let t=d.value;if(t.fullstring==n.node.fullstring)n.node.temp.update(t.args);else{let d=t.temp();d.update(t.args);let l=document.createRange();l.setStart(n.node.start.parentNode,[].slice.call(n.node.start.parentNode.childNodes).indexOf(n.node.start)),l.setEnd(n.node.end.parentNode,[].slice.call(n.node.end.parentNode.childNodes).indexOf(n.node.end)),l.deleteContents(),l.insertNode(d.fragment);let s=l.startContainer.childNodes.item(l.startOffset),o=l.endContainer.childNodes.item(l.endOffset);this.placeholder[e]={kind:"temp",node:{start:s,end:o,temp:d,fullstring:t.fullstring}}}}else if("temp"==d.kind&&"temp"!=n.kind){let t=d.value,l=t.temp();l.update(t.args);let s=document.createRange();s.selectNode(n.node),s.deleteContents(),s.insertNode(l.fragment);let o=s.startContainer.childNodes.item(s.startOffset),r=s.endContainer.childNodes.item(s.endOffset);this.placeholder[e]={kind:"temp",node:{start:o,end:r,temp:l,fullstring:t.fullstring}}}else if("temp"!=d.kind&&"temp"==n.kind){let t=document.createTextNode(String(d.value)),l=document.createRange();l.setStart(n.node.start.parentNode,[].slice.call(n.node.start.childNodes).indexOf(n.node.start)),l.setEnd(n.node.end.parentNode,[].slice.call(n.node.end.childNodes).indexOf(n.node.end)),l.deleteContents(),l.insertNode(t),this.placeholder[e]={kind:"text",node:t}}else if("text"==n.kind){let t=document.createTextNode(String(d.value));n.node.parentNode.replaceChild(t,n.node),this.placeholder[e]={kind:"text",node:t}}}}}function o(e,...t){return{fullstring:e.join(""),temp:()=>new s(e),args:t}}}},t={};function n(d){if(t[d])return t[d].exports;var l=t[d]={exports:{}};return e[d](l,l.exports,n),l.exports}return n.d=(e,t)=>{for(var d in t)n.o(t,d)&&!n.o(e,d)&&Object.defineProperty(e,d,{enumerable:!0,get:t[d]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(607)})()}));